<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deriv Bot Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    .truncate-2-lines {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    #urgent-message {
      background: rgba(255, 215, 0, 0.9);
      border-radius: 0 0 10px 10px;
      animation: slideDown 0.5s ease-out;
    }
    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }
    .search-container {
      position: relative;
    }
    .search-container input {
      padding-left: 2.5rem;
    }
    .search-container svg {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      width: 1.25rem;
      height: 1.25rem;
      color: #6b7280;
    }
    #cookie-banner {
      display: none;
    }
    #cookie-banner.active {
      display: block;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900">
  <!-- Cookie Banner -->
  <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 shadow-md p-4 flex justify-between items-center text-sm z-50">
    <span class="text-gray-700 dark:text-gray-300">We use cookies to enhance your experience. By continuing, you agree to our <a href="/privacy-policy" class="text-blue-500 underline">privacy policy</a>.</span>
    <button id="accept-cookies" class="ml-4 px-3 py-1 bg-green-600 text-white rounded">Accept</button>
  </div>

  <!-- Rest of the HTML stays the same, make sure the footer links (e.g., Privacy Policy, About Us) are now removed from hardcoded version -->

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Cookie prompt logic
      const cookieBanner = document.getElementById('cookie-banner');
      const acceptCookiesBtn = document.getElementById('accept-cookies');
      if (!localStorage.getItem('cookiesAccepted')) {
        cookieBanner.classList.add('active');
      }
      acceptCookiesBtn.addEventListener('click', () => {
        localStorage.setItem('cookiesAccepted', 'true');
        cookieBanner.classList.remove('active');
      });

      const res = await fetch('/api/data');
      const { products, settings, categories, staticPages } = await res.json();

      const grid = document.getElementById('product-grid');
      products.filter(p => !p.isArchived).forEach(product => {
        const card = document.createElement('div');
        card.className = 'bg-white dark:bg-gray-700 rounded-lg shadow-md hover:scale-105 transition-all';
        card.innerHTML = `
          <div class="aspect-w-16 aspect-h-9">
            <img src="${product.img}" alt="${product.name}" class="object-cover w-full h-48 rounded-t-lg">
          </div>
          <div class="p-6">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${product.name}</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300 text-sm truncate-2-lines">${product.desc}</p>
            <p class="mt-2 text-green-600 dark:text-green-400 font-bold">$${product.price}</p>
            <a href="/?name=${encodeURIComponent(product.name)}&item=${product.item}&price=${product.price}" class="mt-4 w-full block bg-green-600 text-white py-2 text-center rounded-md hover:bg-green-700">Buy Now</a>
          </div>
        `;
        grid.appendChild(card);
      });

      const staticLinks = document.getElementById('static-links');
      staticPages.forEach(page => {
        const link = document.createElement('a');
        link.href = page.slug;
        link.textContent = page.title;
        link.className = 'text-gray-500 hover:text-green-600';
        staticLinks.appendChild(link);
      });

      document.getElementById('support-email').href = `mailto:${settings.supportEmail}`;
      document.getElementById('support-email').textContent = settings.supportEmail;
      document.getElementById('copyright-text').innerHTML = settings.copyrightText;
    });
  </script>
</body>
</html>
